//Copyright Â© 2011-2018 Capital Intellect Inc. All Rights Reserved 
//Patents Pending 
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,g){a instanceof String&&(a=String(a));for(var h=a.length,e=0;e<h;e++){var n=a[e];if(b.call(g,n,e,a))return{i:e,v:n}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,g){a!=Array.prototype&&a!=Object.prototype&&(a[b]=g.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,g,h){if(b){g=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var e=a[h];e in g||(g[e]={});g=g[e]}a=a[a.length-1];h=g[a];b=b(h);b!=h&&null!=b&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,g){return $jscomp.findInternal(this,a,g).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};
$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function g(a){return a instanceof e?a:new e(function(m,d){m(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var m=this;this.asyncExecuteFunction(function(){m.executeBatch_()})}this.batch_.push(a)};var h=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){h(a,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var k=0;k<a.length;++k){var d=a[k];a[k]=null;try{d()}catch(c){this.asyncThrow_(c)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var m=this.createResolveAndReject_();try{a(m.resolve,m.reject)}catch(d){m.reject(d)}};e.prototype.createResolveAndReject_=function(){function a(a){return function(c){d||(d=!0,a.call(b,c))}}var b=this,d=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=void 0;try{b=a.then}catch(d){this.reject_(d);return}"function"==typeof b?
this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)n.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var n=new b;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(c){d.reject(c)}};e.prototype.then=function(a,b){function d(a,d){return"function"==typeof a?function(d){try{c(a(d))}catch(p){f(p)}}:d}var c,f,l=new e(function(a,d){c=a;f=d});this.callWhenSettled_(d(a,c),d(b,f));return l};
e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function d(){switch(c.state_){case 1:a(c.result_);break;case 2:b(c.result_);break;default:throw Error("Unexpected state: "+c.state_);}}var c=this;null==this.onSettledCallbacks_?n.asyncExecute(d):this.onSettledCallbacks_.push(d)};e.resolve=g;e.reject=function(a){return new e(function(b,d){d(a)})};e.race=function(a){return new e(function(b,d){for(var c=$jscomp.makeIterator(a),f=c.next();!f.done;f=c.next())g(f.value).callWhenSettled_(b,
d)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?g([]):new e(function(a,f){function c(d){return function(b){e[d]=b;k--;0==k&&a(e)}}var e=[],k=0;do e.push(void 0),k++,g(d.value).callWhenSettled_(c(e.length-1),f),d=b.next();while(!d.done)})};return e},"es6","es3");
var isMessageInitialized=!1,NotifyBarSettings={divID:"BFRLsliderDiv",iframeID:"BFRLsliderIframe",aCloseID:"aClose",slidedelay:200,height:94,width:500,dragState:!1,position:{},isInitialized:!1},_initializeNotifyBarPosition=function(a){a.position&&delete a.position;a.position={};a.position.XHasPX=!1;a.position.YHasPX=!1;a.position.right="auto";a.position.x="calc(100% + "+NotifyBarSettings.width+"px)";a.position.y=62;return a},_insertCSS=function(a){a||(a=_initializeNotifyBarPosition(a));"auto"===a.position.x?
a.position.firstTime=!0:delete a.position.right;var b="@keyframes keyframeFlyIn { 0% { "+("undefined"===typeof a.position.right?"position: fixed; left: calc(100% + "+a.position.x+"px); top: "+a.position.y+"px;":"position: fixed; right: calc(-100%); top: "+a.position.y+"px;")+"} ";b=b+"100% {"+("undefined"===typeof a.position.right?"position: fixed; left: "+a.position.x+"px; top: "+a.position.y+"px;":"position: fixed; right: 30px; top: "+a.position.y+"px;")+"}} ";b=b+"@keyframes keyframeFlyOut { 0% {"+
("undefined"===typeof a.position.right?"position: fixed; left: "+a.position.x+"px; top: "+a.position.y+"px;":"position: fixed; right: 30px; top: "+a.position.y+"px;")+"} ";b=b+"100% {"+("undefined"===typeof a.position.right?"position: fixed; left: calc(100% + "+a.position.x+"px); top: "+a.position.y+"px;":"position: fixed; right: calc(-100%); top: "+a.position.y+"px;")+"}} ";b+="@keyframes keyframeFadeOut { 0% { opacity: 1; } 100% { opacity: 0; }} ";NotifyBarSettings.isEdge&&(b=b+".flyIn {"+("undefined"===
typeof a.position.right?"display: block !important; position: fixed; left: "+a.position.x+"px; top: "+a.position.y+"px;":"display: block; position: fixed; right: 30px; top: 62px;")+"}} ",b=b+".flyOut {"+("undefined"===typeof a.position.right?"display: none !important; position: fixed; left: "+a.position.x+"px; top: "+a.position.y+"px;":"display: none; position: fixed; right: 30px; top: 62px;")+"}} ",b=b+".fadeOut {"+("undefined"===typeof a.position.right?"display: none !important; position: fixed; left: "+
a.position.x+"px; top: "+a.position.y+"px;":"display: none; position: fixed; right: 30px; top: 62px;")+"}} ");(a=document.querySelector("#notifybarKeyframes"))&&document.head.removeChild(a);a=document.createElement("style");a.id="notifybarKeyframes";a.setAttribute("type","text/css");a.appendChild(document.createTextNode(b));document.head.insertBefore(a,document.head.firstChild)};
(function(a){var b=["notification-right-container-activated","notification-right-container-notActivated","notification-first-easy"],g=function(){_insertCSS(NotifyBarSettings);var a=document.querySelector("#notification-body");a&&(a.classList.contains("flyIn")&&a.classList.remove("flyIn"),a.classList.add("flyOut"));a&&NotifyBarSettings.isEdge&&(a.style.display="none")},h=function(){_insertCSS(NotifyBarSettings);var a=document.querySelector("#notification-body");a&&(a.classList.contains("flyOut")&&
a.classList.remove("flyOut"),a.classList.add("fadeOut"))},e=function(a,b){for(var d=0;d<a.length;d++)if(a[d]===b)return!0;return!1},n=function(a,b){if(null!==b&&null!==a)for(var d in b)a.style[d.toString()]=b[d]},m=function(a,b){if(a&&b){var d=window.getComputedStyle(a).width,e=""===d?500:parseInt(window.getComputedStyle(a).width.slice(0,-2));d=window.getComputedStyle(a).height;a=""===d?150:parseInt(window.getComputedStyle(a).height.slice(0,-2));d=window.innerWidth||document.documentElement.clientWidth||
document.body.clientWidth;var c=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;e=517>e?517:e;0>b.x&&(b.x=0);b.x>=d-e&&(b.x=d-e);0>b.y&&(b.y=0);b.y>c-a&&(b.y=c-a)}},k={show:function(d){try{if("complete"==document.readyState||"interactive"==document.readyState){a.extend(NotifyBarSettings,d);"string"===typeof NotifyBarSettings.dialogPosition&&0<NotifyBarSettings.dialogPosition.length?(NotifyBarSettings.position=JSON.parse(NotifyBarSettings.dialogPosition),delete NotifyBarSettings.position.right):
NotifyBarSettings=_initializeNotifyBarPosition(NotifyBarSettings);delete NotifyBarSettings.dialogPosition;_insertCSS(NotifyBarSettings);var c=a(this);preexist=a("#"+NotifyBarSettings.iframeID);0!==preexist.length&&(c=preexist);a("html").append(c);c.attr("id",NotifyBarSettings.iframeID);c.css({position:"fixed","z-index":"2147483647",height:"0px","background-color":"white",top:"0px",left:"0px",width:"0px","border-width":"0px",visibility:"unset",padding:"0",display:"block"});c.attr("scrolling","no");
var f=c.get(0);f.innerHTML=DOMPurify.sanitize(unescape(NotifyBarSettings.notifybar),{FORCE_BODY:!0});f.style.margin=0;f.style.padding=0;if(!document.getElementById("bfgl_draggable_style")){var l=document.createElement("link");l.id="bfgl_draggable_style";l.setAttribute("href",d.cssUrl);l.setAttribute("rel","stylesheet");l.setAttribute("type","text/css");var t=document.querySelector("head");t.insertBefore(l,t.firstChild)}var h=f.querySelector("#notification-body");h.classList.contains("flyOut")||(h.classList.add("flyOut"),
h.classList.remove("flyIn"),h&&NotifyBarSettings.isEdge&&(h.style.display="none"));for(c=0;c<b.length;c++){var q=e(NotifyBarSettings.visibles,b[c])&&!e(NotifyBarSettings.skipdisplay,b[c]);f.querySelector("#"+b[c]).style.visibility=q?"visible":"hidden"}var p=document.querySelector("#ButtonID");p&&p.classList.add("button_collapse");a(f).find("#"+NotifyBarSettings.aCloseID).click(function(){k.hide()});f.querySelector("#notification-banner").src=NotifyBarSettings.bannerSrc;f.querySelector("#notification-button-activateCBText").innerText=
"Activate "+NotifyBarSettings.cashbackRate;f.querySelector("#notification-cashbackActivated-cashbackRateText").innerText=NotifyBarSettings.cashbackRate;q=function(){var a=function(){chrome.runtime.sendMessage({action:"activateCashback",retailerid:NotifyBarSettings.retailerid,targetScript:"shoptoolbar.js"},function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)});chrome.runtime.sendMessage({action:"dialogStorePrefs",position:NotifyBarSettings.position,targetScript:"buttonApp.js"},
function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)});var a=document.querySelector("#notification-right-container-notActivated");a.style.display="none";a=document.querySelector("#notification-right-container-activated");a.style.visibility="visible";setTimeout(function(){g();chrome.runtime.sendMessage({action:"closeSlider",reason:"activatedCashback",targetScript:"shoptoolbar.js"},function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)})},
parseInt(NotifyBarSettings.cashbackActivatedTimeoutOut))};k.sendBgScriptMessage("disableBackgroundApp.js","showPrivacyPrompt","",function(b){b.Show?k.privacyDialog(!0,function(d){(d||b.Enabled)&&a()}):a()})};var u=f.querySelector("#notification-button-activateCB");u&&u.addEventListener("click",q);NotifyBarSettings.disableable&&(q=function(){g();chrome.runtime.sendMessage({action:"NeverShowAgain",targetScript:"shoptoolbar.js",retailerid:NotifyBarSettings.retailerid},function(){chrome.runtime.lastError&&
console.debug(chrome.runtime.lastError.message)})},f.querySelector("#notification-activateCB").classList="notification-activateCB-yesDisable",f.querySelector("#neverShowButton").style.display="block",f.querySelector("#neverShowButton").addEventListener("click",q));q=function(){NotifyBarSettings.position.firstTime=!1;g();Promise.resolve().then(function(){chrome.runtime.sendMessage({action:"dialogStorePrefs",position:NotifyBarSettings.position,targetScript:"buttonApp.js"},function(){chrome.runtime.lastError&&
console.debug(chrome.runtime.lastError.message)});chrome.runtime.sendMessage({action:"closeSlider",targetScript:"shoptoolbar.js"},function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)})})};var r=f.querySelector("#notification-button-close");r&&r.addEventListener("click",q);chrome.runtime.sendMessage({action:"dialogLoadPrefs",targetScript:"buttonApp.js"},function(a){"string"===typeof a&&0<a.length?NotifyBarSettings.position=JSON.parse(a):"object"===typeof a?NotifyBarSettings.position=
a:NotifyBarSettings=_initializeNotifyBarPosition(NotifyBarSettings);_insertCSS(NotifyBarSettings);chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message);a=f.querySelector("#notification-body");a.style.display="block";a.classList.contains("flyIn")||(a.classList.add("flyIn"),a.classList.remove("flyOut"));var b=f.querySelector("#notification-left");b.classList.add("dialog_grab");b.addEventListener("mousedown",function(a){NotifyBarSettings.dragState=!1;0===a.button&&(a.stopPropagation&&
a.stopPropagation(),a.preventDefault&&a.preventDefault(),NotifyBarSettings.dragState=!0,b.classList.add("active"),chrome.runtime.sendMessage({action:"dialogLoadPrefs",targetScript:"buttonApp.js"},function(a){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message);"string"===typeof a&&0<a.length?NotifyBarSettings.position=JSON.parse(a):"object"===typeof a&&"undefined"!==typeof a.x&&"undefined"!==typeof a.y?NotifyBarSettings.position=a:NotifyBarSettings=_initializeNotifyBarPosition(NotifyBarSettings);
_insertCSS(NotifyBarSettings);a=document.querySelector("#notification-body");a.classList.contains("flyIn")&&a.classList.remove("flyIn");a.classList.contains("flyOut")&&a.classList.remove("flyOut");return!1}));return!0});document.addEventListener("mousemove",function(a){if(NotifyBarSettings.dragState&&("string"!==typeof NotifyBarSettings.position.x||NotifyBarSettings.position.XHasPX||(NotifyBarSettings.position.x=a.clientX),"string"!==typeof NotifyBarSettings.position.y||NotifyBarSettings.position.XHasPX||
(NotifyBarSettings.position.y=a.clientY),2<Math.abs(NotifyBarSettings.position.x-a.clientX)&&2<Math.abs(NotifyBarSettings.position.y-a.clientY))){var b=document.querySelector("#notification-body"),d=parseInt(window.getComputedStyle(b).width.slice(0,-2))/5,e=parseInt(window.getComputedStyle(b).height.slice(0,-2))/2;NotifyBarSettings.position.x=a.clientX-d;NotifyBarSettings.position.y=a.clientY-e;m(b,NotifyBarSettings.position);n(b,{top:NotifyBarSettings.position.YHasPX?NotifyBarSettings.position.y:
NotifyBarSettings.position.y+"px",left:NotifyBarSettings.position.XHasPX?NotifyBarSettings.position.x:NotifyBarSettings.position.x+"px",right:"auto"})}});document.addEventListener("mouseup",function(a){if(NotifyBarSettings.dragState){NotifyBarSettings.dragState=!1;b.classList.remove("active");var d=document.querySelector("#notification-body"),e=parseInt(window.getComputedStyle(d).width.slice(0,-2))/5,c=parseInt(window.getComputedStyle(d).height.slice(0,-2))/2;NotifyBarSettings.position.x=a.clientX-
e;NotifyBarSettings.position.y=a.clientY-c;m(d,NotifyBarSettings.position);n(d,{top:NotifyBarSettings.position.YHasPX?NotifyBarSettings.position.y:NotifyBarSettings.position.y+"px",left:NotifyBarSettings.position.XHasPX?NotifyBarSettings.position.x:NotifyBarSettings.position.x+"px",right:"auto"});chrome.runtime.sendMessage({action:"dialogStorePrefs",position:NotifyBarSettings.position,targetScript:"buttonApp.js"})}})})}else document.addEventListener("load",function(c){a.extend(NotifyBarSettings,d);
"string"===typeof NotifyBarSettings.dialogPosition&&0<NotifyBarSettings.dialogPosition.length?(NotifyBarSettings.position=JSON.parse(NotifyBarSettings.dialogPosition),delete NotifyBarSettings.position.right):NotifyBarSettings=_initializeNotifyBarPosition(NotifyBarSettings);delete NotifyBarSettings.dialogPosition;_insertCSS(NotifyBarSettings);c=a(this);preexist=a("#"+NotifyBarSettings.iframeID);0!==preexist.length&&(c=preexist);a("html").append(c);c.attr("id",NotifyBarSettings.iframeID);c.css({position:"fixed",
"z-index":"2147483647",height:"0px","background-color":"white",top:"0px",left:"0px",width:"0px","border-width":"0px",visibility:"unset",padding:"0",display:"block"});c.attr("scrolling","no");var f=c.get(0);f.innerHTML=DOMPurify.sanitize(unescape(NotifyBarSettings.notifybar),{FORCE_BODY:!0});f.style.margin=0;f.style.padding=0;c=document.createElement("link");c.setAttribute("href",d.cssUrl);c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");var l=f.querySelector("head");l.insertBefore(c,
l.firstChild);c=f.querySelector("#notification-body");c.classList.contains("flyOut")||(c.classList.add("flyOut"),c.classList.remove("flyIn"),c&&NotifyBarSettings.isEdge&&(c.style.display="none"));for(c=0;c<b.length;c++)l=e(NotifyBarSettings.visibles,b[c])&&!e(NotifyBarSettings.skipdisplay,b[c]),f.querySelector("#"+b[c]).style.visibility=l?"visible":"hidden";(c=document.querySelector("#ButtonID"))&&c.classList.add("button_collapse");a(f).find("#"+NotifyBarSettings.aCloseID).click(function(){k.hide()});
f.querySelector("#notification-banner").src=NotifyBarSettings.bannerSrc;f.querySelector("#notification-button-activateCBText").innerText="Activate "+NotifyBarSettings.cashbackRate;f.querySelector("#notification-cashbackActivated-cashbackRateText").innerText=NotifyBarSettings.cashbackRate;c=function(){chrome.runtime.sendMessage({action:"activateCashback",retailerid:NotifyBarSettings.retailerid,targetScript:"shoptoolbar.js"},function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)});
chrome.runtime.sendMessage({action:"dialogStorePrefs",position:NotifyBarSettings.position,targetScript:"buttonApp.js"},function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)});var a=document.querySelector("#notification-right-container-notActivated");a.style.display="none";a=document.querySelector("#notification-right-container-activated");a.style.visibility="visible";setTimeout(function(){g();chrome.runtime.sendMessage({action:"closeSlider",reason:"activatedCashback",
targetScript:"shoptoolbar.js"},function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)})},parseInt(NotifyBarSettings.cashbackActivatedTimeoutOut))};(l=f.querySelector("#notification-button-activateCB"))&&l.addEventListener("click",c);NotifyBarSettings.disableable&&(c=function(){g();chrome.runtime.sendMessage({action:"NeverShowAgain",targetScript:"shoptoolbar.js",retailerid:NotifyBarSettings.retailerid},function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)})},
f.querySelector("#notification-activateCB").classList="notification-activateCB-yesDisable",f.querySelector("#neverShowButton").style.display="block",f.querySelector("#neverShowButton").addEventListener("click",c));c=function(){NotifyBarSettings.position.firstTime=!1;g();Promise.resolve().then(function(){chrome.runtime.sendMessage({action:"dialogStorePrefs",position:NotifyBarSettings.position,targetScript:"buttonApp.js"},function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)});
chrome.runtime.sendMessage({action:"closeSlider",targetScript:"shoptoolbar.js"},function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)})})};(l=f.querySelector("#notification-button-close"))&&l.addEventListener("click",c);chrome.runtime.sendMessage({action:"dialogLoadPrefs",targetScript:"buttonApp.js"},function(a){"string"===typeof a&&0<a.length?NotifyBarSettings.position=JSON.parse(a):"object"===typeof a?NotifyBarSettings.position=a:NotifyBarSettings=_initializeNotifyBarPosition(NotifyBarSettings);
_insertCSS(NotifyBarSettings);chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message);a=f.querySelector("#notification-body");a.style.display="block";a.classList.contains("flyIn")||(a.classList.add("flyIn"),a.classList.remove("flyOut"));var b=f.querySelector("#notification-left");b.classList.add("dialog_grab");b.addEventListener("mousedown",function(a){NotifyBarSettings.dragState=!1;0===a.button&&(a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),NotifyBarSettings.dragState=
!0,b.classList.add("active"),chrome.runtime.sendMessage({action:"dialogLoadPrefs",targetScript:"buttonApp.js"},function(a){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message);"string"===typeof a&&0<a.length?NotifyBarSettings.position=JSON.parse(a):"object"===typeof a&&"undefined"!==typeof a.x&&"undefined"!==typeof a.y?NotifyBarSettings.position=a:NotifyBarSettings=_initializeNotifyBarPosition(NotifyBarSettings);_insertCSS(NotifyBarSettings);a=document.querySelector("#notification-body");
a.classList.contains("flyIn")&&a.classList.remove("flyIn");a.classList.contains("flyOut")&&a.classList.remove("flyOut");return!1}));return!0});document.addEventListener("mousemove",function(a){if(NotifyBarSettings.dragState&&("string"!==typeof NotifyBarSettings.position.x||NotifyBarSettings.position.XHasPX||(NotifyBarSettings.position.x=a.clientX),"string"!==typeof NotifyBarSettings.position.y||NotifyBarSettings.position.XHasPX||(NotifyBarSettings.position.y=a.clientY),2<Math.abs(NotifyBarSettings.position.x-
a.clientX)&&2<Math.abs(NotifyBarSettings.position.y-a.clientY))){var b=document.querySelector("#notification-body"),d=parseInt(window.getComputedStyle(b).width.slice(0,-2))/5,c=parseInt(window.getComputedStyle(b).height.slice(0,-2))/2;NotifyBarSettings.position.x=a.clientX-d;NotifyBarSettings.position.y=a.clientY-c;m(b,NotifyBarSettings.position);n(b,{top:NotifyBarSettings.position.YHasPX?NotifyBarSettings.position.y:NotifyBarSettings.position.y+"px",left:NotifyBarSettings.position.XHasPX?NotifyBarSettings.position.x:
NotifyBarSettings.position.x+"px",right:"auto"})}});document.addEventListener("mouseup",function(a){if(NotifyBarSettings.dragState){NotifyBarSettings.dragState=!1;b.classList.remove("active");var d=document.querySelector("#notification-body"),c=parseInt(window.getComputedStyle(d).width.slice(0,-2))/5,e=parseInt(window.getComputedStyle(d).height.slice(0,-2))/2;NotifyBarSettings.position.x=a.clientX-c;NotifyBarSettings.position.y=a.clientY-e;m(d,NotifyBarSettings.position);n(d,{top:NotifyBarSettings.position.YHasPX?
NotifyBarSettings.position.y:NotifyBarSettings.position.y+"px",left:NotifyBarSettings.position.XHasPX?NotifyBarSettings.position.x:NotifyBarSettings.position.x+"px",right:"auto"});chrome.runtime.sendMessage({action:"dialogStorePrefs",position:NotifyBarSettings.position,targetScript:"buttonApp.js"},function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)})}})})})}catch(v){console.error("(debug) ",v)}},hide:function(){k.hideHelper(7)},hideTimeout:function(){k.hideHelper(3)},
hidePopup:function(){k.hideHelper(1)},hideHelper:function(b){a("#"+NotifyBarSettings.iframeID);a("#"+NotifyBarSettings.divID);NotifyBarSettings.closenote&&Promise.resolve().then(function(){chrome.runtime.sendMessage({action:"dialogStorePrefs",position:NotifyBarSettings.position,targetScript:"buttonApp.js"},function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)});1<b?g():(h(),b=3);chrome.runtime.sendMessage({action:"closeSlider",retailerid:NotifyBarSettings.retailerid,
reason:b,targetScript:"shoptoolbar.js"},function(){chrome.runtime.lastError&&console.debug(chrome.runtime.lastError.message)})})},sendBgScriptMessage:function(a,b,e,l){e=e?e:"";BrowserType.Get()===BrowserType.Chrome||BrowserType.Get()===BrowserType.Edge?window.namespace.runtime.sendMessage({targetScript:a,action:b,data:e},function(a){l&&l(a)}):window.namespace.runtime.sendMessage({targetScript:a,action:b,data:e}).then(function(a){l&&l(a)})},privacyDialog:function(b,c){var d=b,e=document.createElement("div");
e.style="text-align: center !important;margin-left: 35px !important;margin-right: 35px !important;position: absolute !important;top: 70px !important;right: 100px !important;z-index: 999999 !important;padding-bottom: 15px !important;width: 330px !important;background-color: #fff;border: 1px solid #ccc !important;box-shadow: 1px 1px 1px #ccc !important;box-sizing: border-box !important;";var g=document.createElement("div");g.style="font-family: Roboto, Calibri, Arial !important;font-size: 20px !important; margin: 30px 15px 15px 15px !important; text-align:center !important;font-weight:bold !important;";
g.innerText=b?"Allow Cookies to enable your Cash Back earnings":"Allow Cookies to enable this feature";var h=document.createElement("div");h.style="margin: 15px !important; text-align:center !important;";var m=document.createElement("span");m.style="font-family: Roboto, Calibri, Arial !important;font-size: 15px !important;";m.innerText=b?"Without Cookies we don't know which account to send your Cash Back to.":"Without cookies we can't associate this feature to your account.";h.appendChild(m);var p=
document.createElement("div");p.style="font-family:Roboto, Calibri, Arial !important;display: inline-block !important; width: 270px !important; background-color: #2196f3 !important; color: white !important; padding: 10px !important; font-size: 20px !important; font-weight: bold !important; margin-top:15px !important; cursor:pointer !important; text-align:center !important;";p.innerText="Allow Cookies";b=document.createElement("div");b.style="font-family: Roboto, Calibri, Arial !important;font-size: 15px !important;color:#2196f3 !important;margin: 18px 10px 0px 10px !important; cursor:pointer !important; width: 50px !important; display: inline-block !important; text-align:center !important;";
b.innerText="Block";e.appendChild(g);e.appendChild(h);e.appendChild(p);e.appendChild(b);var n=document.getElementById(NotifyBarSettings.iframeID);n&&(n.style.display="none");a("html").append(e);p.onmouseover=function(){p.style.backgroundColor="rgb(12,123,214)"};p.onmouseout=function(){p.style.backgroundColor="#2196f3"};var r=function(){n&&(n.style.display="block");e.style.display="none"};p.onclick=function(){r();k.sendBgScriptMessage("disableBackgroundApp.js","privacyAccepted","",function(a){c(a)})};
b.onclick=function(){d?(d=!1,g.innerText="",g.style.fontSize="18px",g.appendChild(document.createTextNode("Are You Sure You Want to Miss Out")),g.appendChild(document.createElement("br")),g.appendChild(document.createTextNode("on Cash Back?")),m.innerText="Allow Cookies to earn Cash Back. The extension uses cookies to award Cash Back.",g.style.textAlign=h.style.textAlign="left",g.style.padding=h.style.padding="0 25px",e.style.width="370px",p.style.margin="15px 35px 0 35px"):(r(),k.sendBgScriptMessage("disableBackgroundApp.js",
"privacyDeclined"),c(!1))}}};a.fn.notifybar=function(b){if(k[b])return k[b].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof b&&b)a.error("Method "+b+" does not exist on jQuery.notifybar");else return k.show.apply(this,arguments)}})(jQuery);
